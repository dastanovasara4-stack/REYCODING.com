<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>REY.CODING — Портфолио</title>
  <style>
    :root{
      --bg:#ffffff; --text:#111827; --accent:#0b72ff; --muted:#6b7280; --card:#f8fafc;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:var(--bg);color:var(--text);line-height:1.45;
    }
    .container{max-width:1100px;margin:0 auto;padding:1rem}
    .header-inner{display:flex;align-items:center;gap:1rem;justify-content:space-between}
    .logo{font-weight:800;color:var(--text);text-decoration:none;font-size:1.1rem}
    .site-header{border-bottom:1px solid #eef2f7;background:var(--bg);position:sticky;top:0;z-index:40}
    .nav-toggle{display:none;background:none;border:0;font-size:1.4rem;cursor:pointer}
    .main-nav ul{list-style:none;margin:0;padding:0;display:flex;gap:1rem}
    .main-nav a{text-decoration:none;color:var(--text);padding:.4rem .6rem;border-radius:6px}
    .main-nav a:hover{background:var(--card)}
    .controls{display:flex;gap:.5rem;align-items:center}
    .theme-btn{background:none;border:1px solid #ddd;padding:.35rem .5rem;border-radius:6px;cursor:pointer}
    .theme-select{padding:.35rem .5rem;border-radius:6px;border:1px solid #ddd;background:transparent;color:var(--text)}
    .hero{padding:3.5rem 0;background:linear-gradient(180deg,var(--card),transparent)}
    .hero h1{margin:0 0 .4rem;font-size:2rem}
    .lead{margin:0 0 1rem;color:var(--muted)}
    .btn{display:inline-block;background:var(--accent);color:#fff;padding:.6rem 1rem;border-radius:8px;text-decoration:none}
    .projects{padding:1.5rem 0}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
    .card{background:var(--card);padding:1rem;border-radius:8px;box-shadow:0 1px 2px rgba(10,10,10,.03)}
    .link-btn{color:var(--accent);text-decoration:none;font-weight:600}
    .skills{padding:1rem 0}
    .skills-list{display:flex;flex-wrap:wrap;gap:.6rem;padding:0;margin:0;list-style:none}
    .skills-list li{background:#f1f5f9;padding:.4rem .7rem;border-radius:999px;color:var(--muted);font-weight:600}
    .contact{padding:1.5rem 0}
    .form-row{margin-bottom:.75rem}
    label{display:block;margin-bottom:.25rem;color:var(--muted);font-size:.9rem}
    input,textarea,select{width:100%;padding:.6rem;border:1px solid #e6edf3;border-radius:6px;font:inherit}
    .form-actions{display:flex;gap:1rem;align-items:center;margin-top:.5rem}
    .form-result{color:var(--muted)}
    .site-footer{border-top:1px solid #eef2f7;padding:1rem 0;margin-top:1.5rem;text-align:center;color:var(--muted)}
    /* Dark */
    body.dark{ --bg:#0b1220; --text:#e6eef8; --accent:#3aa3ff; --muted:#9fb4d3; --card:#0f1724; }
    body.dark .site-header{border-bottom-color:rgba(255,255,255,.06)}
    body.dark .site-footer{border-top-color:rgba(255,255,255,.04)}
    /* Responsive */
    @media (max-width:800px){
      .nav-toggle{display:inline-block}
      .main-nav{position:absolute;left:0;right:0;top:64px;background:var(--bg);display:none;padding:1rem;border-bottom:1px solid #eee}
      .main-nav.open{display:block}
      .main-nav ul{flex-direction:column;gap:.5rem}
      .header-inner{position:relative}
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner" role="banner">
      <a class="logo" href="#">REY.CODING</a>

      <button id="navToggle" class="nav-toggle" aria-label="Открыть меню">☰</button>

      <nav id="mainNav" class="main-nav" aria-label="Главная навигация">
        <ul>
          <li><a href="#home">Главная</a></li>
          <li><a href="#projects">Проекты</a></li>
          <li><a href="#skills">Языки</a></li>
          <li><a href="#contact">Контакты</a></li>
        </ul>
      </nav>

      <div class="controls" aria-hidden="false">
        <select id="themeSelect" class="theme-select" aria-label="Выбор темы">
          <option value="system">Системная</option>
          <option value="light">Светлая</option>
          <option value="dark">Тёмная</option>
        </select>
        <button id="themeToggle" class="theme-btn" aria-pressed="false" title="Переключить тему">🌓</button>
      </div>
    </div>
  </header>

  <main>
    <section id="home" class="hero">
      <div class="container">
        <h1>REY.CODING</h1>
        <p class="lead">Портфолио разработчика. Здесь мои проекты и навыки.</p>
        <p><a class="btn" href="#projects">Посмотреть проекты</a></p>
      </div>
    </section>

    <section id="projects" class="projects container">
      <h2>Проекты</h2>
      <div class="grid" role="list">
        <article class="card" role="listitem">
          <h3>REY.cheats</h3>
          <p>Утилиты, сниппеты и набор ускорителей для разработки.</p>
          <p><a class="link-btn" href="rey.cheats.html" target="_blank" rel="noopener">Открыть проект</a></p>
        </article>

        <article class="card" role="listitem">
          <h3>REY.html</h3>
          <p>Набор шаблонов и мини-демо на чистом HTML/CSS/JS.</p>
          <p><a class="link-btn" href="rey.html" target="_blank" rel="noopener">Открыть проект</a></p>
        </article>
      </div>
    </section>

    <section id="skills" class="skills container">
      <h2>Языки и технологии</h2>
      <ul class="skills-list" aria-label="Языки программирования">
        <li>Python</li>
        <li>JavaScript</li>
        <li>HTML</li>
        <li>CSS</li>
        <li>C</li>
      </ul>
    </section>

    <section id="contact" class="contact container">
      <h2>Связаться — задать вопрос</h2>
      <p>Заполните форму — сообщение откроется в вашем почтовом клиенте (mailto). Если почтовый клиент не настроен, вы сможете скопировать текст вручную.</p>

      <form id="contactForm" novalidate>
        <div class="form-row">
          <label for="name">Имя</label>
          <input id="name" name="name" type="text" required />
        </div>
        <div class="form-row">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" required />
        </div>
        <div class="form-row">
          <label for="subject">Тема</label>
          <input id="subject" name="subject" type="text" placeholder="Например: Вопрос по проекту" />
        </div>
        <div class="form-row">
          <label for="message">Сообщение</label>
          <textarea id="message" name="message" rows="6" required></textarea>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn">Отправить</button>
          <div id="formResult" class="form-result" aria-live="polite"></div>
        </div>
      </form>
    </section>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="container">
      <p>© <span id="year"></span> REY.CODING — Все права защищены.</p>
    </div>
  </footer>

  <script>
    (function () {
      const navToggle = document.getElementById('navToggle');
      const mainNav = document.getElementById('mainNav');
      const themeToggle = document.getElementById('themeToggle');
      const themeSelect = document.getElementById('themeSelect');
      const form = document.getElementById('contactForm');
      const formResult = document.getElementById('formResult');
      const yearEl = document.getElementById('year');

      if (yearEl) yearEl.textContent = new Date().getFullYear();

      // Мобильное меню
      navToggle?.addEventListener('click', () => mainNav.classList.toggle('open'));

      // Тема: хранение в localStorage, опция "system"
      const THEME_KEY = 'rey_theme';
      function applyTheme(value) {
        document.body.classList.remove('dark');
        if (value === 'dark') document.body.classList.add('dark');
      }
      function getSystemPrefersDark() {
        return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      }

      // Инициализация выбора темы селектом
      (function initTheme() {
        const saved = localStorage.getItem(THEME_KEY) || 'system';
        themeSelect.value = saved;
        if (saved === 'system') applyTheme(getSystemPrefersDark() ? 'dark' : 'light');
        else applyTheme(saved);
        themeToggle.setAttribute('aria-pressed', document.body.classList.contains('dark').toString());
      })();

      // Переключение селектом
      themeSelect.addEventListener('change', (e) => {
        const val = e.target.value;
        localStorage.setItem(THEME_KEY, val);
        if (val === 'system') applyTheme(getSystemPrefersDark() ? 'dark' : 'light');
        else applyTheme(val);
        themeToggle.setAttribute('aria-pressed', document.body.classList.contains('dark').toString());
      });

      // Быстрый переключатель (инвертирует текущую визуальную тему)
      themeToggle.addEventListener('click', () => {
        const current = localStorage.getItem(THEME_KEY) || 'system';
        // если system — синхронизируем сначала с реальным режимом
        let active = (current === 'system') ? (getSystemPrefersDark() ? 'dark' : 'light') : current;
        const next = active === 'dark' ? 'light' : 'dark';
        localStorage.setItem(THEME_KEY, next);
        themeSelect.value = next;
        applyTheme(next);
        themeToggle.setAttribute('aria-pressed', document.body.classList.contains('dark').toString());
      });

      // Форма: валидация и mailto отправка с fallback на копирование
      form?.addEventListener('submit', (e) => {
        e.preventDefault();
        formResult.textContent = '';
        const name = form.name.value.trim();
        const email = form.email.value.trim();
        const subject = form.subject.value.trim() || 'Вопрос с сайта REY.CODING';
        const message = form.message.value.trim();

        if (!name || !email || !message) {
          formResult.textContent = 'Пожалуйста, заполните все обязательные поля.';
          return;
        }

        // Формируем тело письма
        const body = [
          `Имя: ${name}`,
          `Email: ${email}`,
          '',
          message,
          '',
          '---',
          'Отправлено с сайта REY.CODING'
        ].join('\n');

        const mailto = `mailto:you@example.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

        // Открываем почтовый клиент
        try {
          window.location.href = mailto;
          formResult.textContent = 'Открылся почтовый клиент. Если не открылся — используйте кнопку "Копировать".';
          // Предлагаем кнопку копирования
          showCopyButton(body);
        } catch (err) {
          formResult.textContent = 'Не удалось открыть почтовый клиент.';
          showCopyButton(body);
        }
      });

      function showCopyButton(text) {
        // очистим предыдущие
        const existing = document.getElementById('copyBtn');
        if (existing) existing.remove();

        const btn = document.createElement('button');
        btn.id = 'copyBtn';
        btn.type = 'button';
        btn.className = 'theme-btn';
        btn.textContent = 'Копировать текст';
        btn.style.marginLeft = '8px';
        btn.addEventListener('click', async () => {
          try {
            await navigator.clipboard.writeText(text);
            formResult.textContent = 'Текст скопирован в буфер обмена. Вставьте в почтовый клиент.';
            btn.remove();
          } catch (err) {
            formResult.textContent = 'Не удалось скопировать автоматически. Скопируйте вручную.';
          }
        });
        form.querySelector('.form-actions')?.appendChild(btn);
      }

      // Обновление темы при изменении системной настройки (если выбран system)
      if (window.matchMedia) {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
          const saved = localStorage.getItem(THEME_KEY) || 'system';
          if (saved === 'system') applyTheme(e.matches ? 'dark' : 'light');
        });
      }
    })();
  </script>
</body>
</html>